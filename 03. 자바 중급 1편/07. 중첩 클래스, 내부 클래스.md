# 07. 중첩 클래스, 내부 클래스

### 🔷 **중첩 클래스의 분류**

<div align="center">
  <img width="40%" src="https://github.com/user-attachments/assets/af9d5aaa-34db-486c-ba19-0ca26f049d9a">
</div>

ㅤㅤ✔ **중첩 클래스는 총 4가지가 있고, 크게 2가지로 분류할 수 있다.** <br>
ㅤㅤㅤ🔹 **정적 중첩 클래스**: `static`이 붙은 클래스 <br>
ㅤㅤㅤ🔹 **내부 클래스** <br>
ㅤㅤㅤㅤㅤ- **내부 클래스**: 바깥 클래스의 인스턴스의 멤버에 접근 <br>
ㅤㅤㅤㅤㅤ- **지역 클래스**: 내부 클래스의 특징 + 지역 변수에 접근 <br>
ㅤㅤㅤㅤㅤ- **익명 클래스**: 지역 클래스의 특징 + 클래스의 이름이 없는 특별한 클래스 <br>

ㅤㅤ✔ **중첩 클래스를 정의하는 위치는 변수의 선언 위치와 같다.** <br>
ㅤㅤㅤ🔹 정적 중첩 클래스 → 정적 변수와 같은 위치 <br>
ㅤㅤㅤ🔹 내부 클래스 → 인스턴스 변수와 같은 위치 <br>
ㅤㅤㅤ🔹 지역 클래스 → 지역 변수와 같은 위치 <br><br>

-----
> [!NOTE]
> **중첩(Nested) vs 내부(Inner)** <br>
>ㅤ▫️ 중첩: 어떤 다른 것이 내부에 위치하거나 포함되는 구조적인 관계<br>
>ㅤ▫️ 내부: 나의 내부에 있는 나를 구성하는 요소<br>
> ✅ **정적 중첩 클래스는 `static`이 붙으며, 바깥 클래스의 인스턴스에 소속되지 않는다.** <br>
> ✅ **내부 클래스들은 바깥 클래스의 인스턴스에 소속되며 `static`이 붙지 않는다.** <br>
----

<br><br><br>

### 🔷 **중첩 클래스 사용**
ㅤㅤ✔ **중첩 클래스를 사용하는 상황** <br>
ㅤㅤㅤ**1️⃣** 특정 클래스가 다른 하나의 클래스 안에서만 사용되는 경우 <br>
ㅤㅤㅤ**2️⃣** 둘이 아주 긴밀하게 연결되어 있는 특별한 경우 <br>
ㅤㅤㅤ**❗** 외부의 여러 클래스가 특정 중첩 클래스를 사용한다면 중첩 클래스로 만들면 안된다<br>

ㅤㅤ✔ **중첩 클래스를 사용하는 이유** <br>
ㅤㅤㅤ🔹 **논리적 그룹화**: 다른 곳에서 사용될 필요가 없는 중첩 클래스가 외부에 노출되지 않는 장점도 있음 <br>
ㅤㅤㅤ🔹 **캡슐화**: 중첩 클래스는 바깥 클래스의 `private`멤버에 접근할 수 있기 때문에 불필요한 `public`메서드를 제거할 수 있다<br>

-----
> [!IMPORTANT]
> ✅ **중첩 클래스(내부 클래스 포함)는 그 용도가 자신이 소속된 바깥 클래스 안에서 사용되는 것이다.** <br>
> ㅤㅤ자신이 소속된 바깥 클래스가 아닌 외부에서 생성하고 사용하고 있다면, 이미 중첩 클래스의 용도에 맞지 않을 수 있다. <br>
> ㅤㅤ이때는 중첩 클래스를 밖으로 빼는 것이 더 나은 선택이다. 
-----

<br><br><br>

### 🔷 **정적 중첩 클래스(static nested class)**
ㅤㅤ✔ **특징** <br>
ㅤㅤㅤ🔹 자신의 멤버에는 당연히 접근할 수 있다. <br>
ㅤㅤㅤ🔹 **바깥 클래스의 인스턴스 멤버에는 접근할 수 없다.** <br>
ㅤㅤㅤ🔹 바깥 클래스의 클래스 멤버에는 접근할 수 있다. <br>

ㅤㅤ✔ **정적 중첩 클래스는 사실 다른 클래스를 그냥 중첩해 둔 것일 뿐이다** <br>
ㅤㅤㅤ- `private` 접근 제어자에 접근할 수 있는 점 말고는 그냥 클래스 2개를 따로 만든것과 같다 <br><br>

**💡 예시 1 - 개념 설명**
```JAVA
package nested.nested;

public class NestedOuter {
    private static int outClassValue = 3;
    private int outInstanceValue = 2;

    static class Nested {
        private int nestedInstanceValue = 1;

        public void print() {
            // 자신의 멤버에 접근
            System.out.println(nestedInstanceValue);

            // 바깥 클래스의 인스턴스 멤버에는 접근할 수 없다.
            //System.out.println(outInstanceValue);

            // 바깥 클래스의 클래스 멤버에는 접근할 수 있다. private도 접근 가능
            System.out.println(NestedOuter.outClassValue);
        }
    }
}

======================================================================================
package nested.nested;

public class NestedOuterMain {
    public static void main(String[] args) {
        // NestedOuter outer = new NestedOuter(); // 생략가능
        NestedOuter.Nested nested = new NestedOuter.Nested();  // 바깥클래스.중첩클래스 로 접근
        nested.print();

        System.out.println("nestedClass = " + nested.getClass());
    }
}

>>
1
3
nestedClass = class nested.nested.NestedOuter$Nested    // $로 바깥 클래스와 중첩 클래스 구분
```

**💡 예시 2 - 사용 예시**
```JAVA
package nested.nested.ex2;

public class Network {
    public void sendMessage(String text) {
        NetworkMessage networkMessage = new NetworkMessage(text);
        networkMessage.print();
    }

    private static class NetworkMessage{
        private String content;

        public NetworkMessage(String content) {
            this.content = content;
        }

        public void print() {
            System.out.println(content);
        }
    }
}

======================================================================================
package nested.nested.ex2;

public class NetworkMain {
    public static void main(String[] args) {
        Network network = new Network();
        network.sendMessage("hello java");
    }
}
```

<br><br><br>

### 🔷 **내부 클래스(Inner class)**
ㅤㅤ✔ **특징** <br>
ㅤㅤㅤ🔹 자신의 멤버에는 당연히 접근할 수 있다. <br>
ㅤㅤㅤ🔹 **바깥 클래스의 인스턴스 멤버에는 접근할 수  있다.** <br>
ㅤㅤㅤ🔹 바깥 클래스의 클래스 멤버에는 접근할 수 있다. <br>

**💡 예시 1 - 개념 설명**
```JAVA
package nested.inner;

public class InnerOuter {
    private static int outClassValue = 3;
    private int outInstanceValue = 2;

    class Inner {
        private int innerInstanceValue = 1;

        public void print() {
            // 자신의 멤버에 접근
            System.out.println(innerInstanceValue);

            // 외부 클래스의 인스턴스 멤버에 접근 가능, private도 접근 가능
            System.out.println(outInstanceValue);

            // 외부 클래스의 클래스 멤버에는 접근 가능. private도 접근 가능
            System.out.println(InnerOuter.outClassValue);
        }
    }
}
======================================================================================
package nested.inner;

public class InnerOuterMain {
    public static void main(String[] args) {
        InnerOuter outer = new InnerOuter();
        InnerOuter.Inner inner = outer.new Inner();  // 내부 클래스는 `바깥클래스의 인스턴스 참조`.new 내부클래스() 로 생성할 수 있다.
        inner.print();

        System.out.println("innerClass = " + inner.getClass());
    }
}

>>
1
2
3
innerClass = class nested.inner.InnerOuter$Inner
```


**💡 예시 2 - 사용 예시**
```JAVA
package nested.inner.ex2;

public class Car {
    private String model;
    private int chargeLevel;
    private Engine engine;

    public Car(String model, int chargeLevel) {
        this.model = model;
        this.chargeLevel = chargeLevel;
        this.engine = new Engine();
    }
    public void start() {
        engine.start();
        System.out.println(model + " 시작 완료");
    }

    private class Engine {
        public void start() {
            System.out.println("충전 레벨 확인: " + chargeLevel);
            System.out.println(model + "의 엔진을 구동합니다.");
        }
    }
}
======================================================================================
package nested.inner.ex2;

public class CarMain {
    public static void main(String[] args) {
        Car myCar = new Car("Model Y", 100);
        myCar.start();
    }
}
```
<br>

❗**섀도잉(Shadowing)** <br>
ㅤㅤ- 바깥 클래스의 인스턴스 변수와 내부 클래스의 인스턴스 변수 이름이 같을 경우 **다른 변수들을 가려서 보이지 않게 하는 것**<br>
ㅤㅤ- **지역변수 → 내부 클래스의 인스턴스 변수 → 바깥 클래스의 인스턴스 변수** 순으로 우선순위가 높다 <br>
ㅤㅤ- **프로그래밍에서 가장 중요한 것은 명확성**. 처음부터 이름을 서로 다르게 지어서 명확하게 구분하는 것 추천 <br>

**💡 예시**
```JAVA
package nested;

public class ShadowingMain {
    public int value = 1;

    class Inner {
        public int value = 2;

        void go() {
            int value = 3;
            System.out.println("value = " + value);
            System.out.println("this.value = " + this.value);
            System.out.println("ShadowingMain.value = " + ShadowingMain.this.value);
        }
    }

    public static void main(String[] args) {
        ShadowingMain main = new ShadowingMain();
        Inner inner = main.new Inner();
        inner.go();
    }
}
```

<br><br><br>

### 🔷 **지역 클래스(Local class)**
ㅤㅤ✔ **특징** <br>

<br><br><br>

### 🔷 **익명 클래스(Anonymous class)**
ㅤㅤ✔ **특징** <br>

<br><br><br>


<!--
공백문자: "ㅤ" or &nbsp;
### 🔷 ****
>ㅤ✅ **** <br>
ㅤㅤ:  <br>
ㅤㅤㅤex) <br>
ㅤㅤ✔ **** <br>
ㅤㅤㅤ🔹 **** <br>
ㅤㅤㅤㅤㅤ- **** <br>
➡️
ㅤㅤㅤㅤㅤex) <br>
ㅤㅤ❗ <br>
ㅤㅤ❓ <br>
ㅤㅤ✅ <br>
ㅤㅤㅤㅤ**▪️** <br>
ㅤㅤㅤㅤ**▫️** <br>
ㅤㅤ**1️⃣** <br>
ㅤㅤ**2️⃣** <br>
ㅤㅤ**3️⃣** <br>
ㅤㅤ**4️⃣** <br>
ㅤㅤ**5️⃣** <br>
ㅤㅤ**🤔** <br>
> [!NOTE]  
> [!TIP]
> [!IMPORTANT]  
> [!WARNING]  
> [!CAUTION]


**💡 예시**
```JAVA

```


<details><summary>💡예시 코드</summary>

```JAVA

```
</details>


<div align="center">
  <img width="70%" src="">
</div> <br><br>
-->

# 10. 다형성

### 🔹 **다형성 (Polymorphism)**
ㅤㅤ✔ 객체지향 프로그래밍의 대표적인 특징인 캡슐화, 상속, 다형성 중 하나, **한 객체가 여러 타입의 객체로 취급될 수 있는 능력** <br>
ㅤㅤ✔ 다형성을 이해하기 위해 **다형적 참조**와 **메서드 오버라이딩**의 개념을 알아야 한다. <br><br><br>

### 🔹 **다형적 참조**

<div align="center">
  <img width="70%" src="https://github.com/user-attachments/assets/be0b9649-d8b5-4ae3-bd0d-23fbc6d8172c">
</div> 

ㅤㅤ✔ **부모 타입의 변수가 자식 인스턴스 참조** <br>
ㅤㅤ✔ **부모 타입은 자식 타입을 담을 수 있다.** 반대로 자식 타입은 부모 타입을 담을 수 없다. (손자의 타입까지도 가능)<br>
ㅤㅤ✔ 자식의 타입을 담을 수는 있지만, 부모의 타입에는 부모의 기능(메서드)만 존재하므로 **자식의 기능은 호출할 수 없다.** <br>
ㅤㅤ❗ **다형적 참조의 한계**: 상속 관계에서 부모 방향으로 찾아 올라갈 수는 있지만, 자식 방향으로는 찾아 내려갈 수 없다. <br>
ㅤㅤㅤㅤ그렇기 때문에 자식의 기능은 호출할 수 없다. 자식의 기능을 호출하고 싶다면 **캐스팅**을 사용하면 된다.<br>
<div align="center">
  <img width="70%" src="https://github.com/user-attachments/assets/d1357e46-9308-4cda-ab69-7e3adf30cc77">
</div><br>


**💡 예시**
```JAVA
package poly.basic;

public class Parent {
    public void parentMethod() {
        System.out.println("Parent.parentMethod");
    }
}
------------------------------------------

package poly.basic;

public class Child extends Parent{  //자식 클래스에서 부모의 클래스를 상속하기 때문에 부모 타입이 자식 타입을 담을 수 있다
    public void childMethod() {
        System.out.println("Child.childMethod");
    }
}

------------------------------------------
package poly.basic;

public class PolyMain {
    public static void main(String[] args) {
        //부모 변수가 부모 인스턴스 참조
        System.out.println("Parent -> Parent");
        Parent parent = new Parent();
        parent.parentMethod();

        //자식 변수가 자식 인스턴스 참조
        System.out.println("Child -> Child");
        Child child = new Child();
        child.parentMethod();
        child.childMethod();

// !!!! 부모 변수가 자식 인스턴스 참조(다형적 참조) !!!!
        System.out.println("Parent -> Child");
        Parent poly = new Child();
        poly.parentMethod();

        //Child child1 = new Parent(); 자식은 부모를 담을 수 없다.

        //자식의 기능은 호출할 수 없다. 컴파일 오류 발생
        //poly.childMethod();
    }
}
```

<br><br><br>

### 🔹 **캐스팅 (Casting)** 
ㅤㅤ: `Child child = (Child) poly` 처럼 괄호와 그 사이에 타입을 지정하여 참조 대상을 **특정 타입으로 변경하는 것** <br>

```java
Child child = (Child) poly //다운캐스팅을 통해 부모타입을 자식 타입으로 변환한 다음에 대입 시도
Child child = (Child) x001 //참조값을 읽은 다음 자식 타입으로 지정
Child child = x001 //최종 결과
```
ㅤㅤ❗ 캐스팅을 한다고해서 `Parent poly`의 타입이 변하는 것은 아니다. **poly로부터 꺼낸 참조값이 `Child` 타입으로 되는 것** <br><br><br>

### 🔹 **캐스팅의 종류** 
ㅤ**1️⃣** **다운 캐스팅** - 자식 타입으로 변경 <br>

**💡 예시**

```JAVA
package poly.basic;

public class CastingMain1 {
    public static void main(String[] args) {
        //부모 변수가 자식 인스턴스 참조(다형적 참조)
        Parent poly = new Child();
        //단 자식의 기능은 호출할 수 없다. 컴파일 오류 발생
        //poly.childMethod();

        //다운캐스팅(부모 타입 -> 자식 타입)
        Child child = (Child) poly;
        child.childMethod();
    }
}
```

<br>

ㅤ**2️⃣** **일시적 다운 캐스팅** <br>

**💡 예시**

```JAVA
package poly.basic;

public class CastingMain2 {
    public static void main(String[] args) {
        //부모 변수가 자식 인스턴스 참조(다형적 참조)
        Parent poly = new Child();
        //단 자식의 기능은 호출할 수 없다. 컴파일 오류 발생
        //poly.childMethod();

        //일시적 다운캐스팅 - 해당 메서드를 호출하는 순간만 다운캐스팅
        ((Child) poly).childMethod();
    }
}
```
<br>

ㅤ**3️⃣** **업 캐스팅** - 부모 타입으로 변경 <br>

**💡 예시**
```JAVA
package poly.basic;

public class CastingMain3 {
    public static void main(String[] args) {
        Child child = new Child();
        Parent parent1 = (Parent) child;  //업캐스팅은 생략 가능 (업캐스팅은 매우 자주 사용하기에 생략을 권장)
        Parent parent2 = child; //업캐스팅 생략 (가능한 이 형태로 코드 작성!!)

        parent1.parentMethod();
        parent2.parentMethod();
    }
}
```

<br>

--------------
> [!WARNING]
> **다운캐스팅 주의점**

```java
package poly.basic;

public class CastingMain4 {
    public static void main(String[] args) {
        Parent parent1 = new Child();
        Child child1 = (Child) parent1;
        child1.childMethod(); // 문제 없음


        Parent parent2 = new Parent();
        Child child2 = (Child) parent2; //런타임 오류 - ClassCastException
        child2.childMethod();  //실행 불가
    }
}
```

<br>

<div align="center">
  <img width="70%" src="https://github.com/user-attachments/assets/821fc021-54ca-4b82-8d0a-9d39cea87ea0">
</div> 

<br>
ㅤ❗`parent2`는 `new Parent()`로 객체를 생성했기 때문에 **애초에 메모리상에 자식 타입이 존재하지 않는다**. <br>
ㅤ ㅤ따라서 `Child` 타입으로 다운캐스팅하면 존재하지 않는 `Child` 메서드를 찾아서 **런타임 오류**가 발생한다  <br>

ㅤ❓ **컴파일 오류 vs 런타임 오류** <br>
ㅤㅤㅤ- **컴파일 오류**: 변수명 오타, 잘못된 클래스 이름 사용 등 자바 **프로그램 실행 전 발생**하는 오류 <br>
ㅤㅤㅤ- **런타임 오류**: **프로그램이 실행되고 있는 시점에 발생**한 오류 <br>

--------------

<br><br><br>

### 🔹 **instanceof** 




<!--
공백문자: "ㅤ" or &nbsp;
### 🔹 ** **
ㅤㅤ:  <br>
ㅤㅤㅤex) <br>
ㅤㅤ✔ **** <br>
ㅤㅤㅤ- **** <br>
ㅤㅤㅤㅤㅤex) <br>
ㅤㅤ❗ <br>
ㅤㅤ❓ <br>
ㅤㅤ✅ <br>
ㅤㅤㅤㅤ**▪️** <br>
ㅤㅤㅤㅤ**▫️** <br>
ㅤㅤ**1️⃣** <br>
ㅤㅤ**2️⃣** <br>
ㅤㅤ**3️⃣** <br>
ㅤㅤ**4️⃣** <br>
ㅤㅤ**5️⃣** <br>

> [!TIP]
> [!IMPORTANT]

**💡 예시**
```JAVA

```


<div align="center">
  <img width="70%" src="">
</div> <br><br>
-->
